# 第 6 章 应   用
## 6.1 停   时
### 6.1.1 定义和基本性质

停时这一概念在研究随机微分方程时自然而然地出现，有了它我们可以考察过程在 “随机时间段” 上的行为。考虑概率空间 $(\Omega, \mathcal{U}, P)$，$\mathcal{F}(\cdot)$ 是滤子，我们在本节引入一些在 $\mathcal{F}(\cdot)$ 下有良好性质的随机时间量。

> **定义 6.1 （停时）**
> 一个映射 $\tau: \Omega \rightarrow [0, \infty]$ 若满足对所有 $t \geqslant 0$，都有 $\tau^{-1}\Big( (-\infty, t] \Big) \in \mathcal{F}(t)$ 则它被称为 $\mathcal{F}(\cdot)$ 的停时。

这说的是所有的 $(-\infty, t]$ 都是 $\mathcal{F}(t)$-可测集合。另外注意 $t$ 可以取 $+\infty$，因此任意常数 $\tau \equiv t_{0}$ 也是 $\mathcal{F}(\cdot)$ 的停时。接着我们看停时的一些性质。一般为了方便，将 $\tau ^{-1}\Big( (-\infty, t] \Big)$ 写成 $\{ \tau \leqslant t \}$。

> **定理 6.2 （停时的基本性质）**
> 假设 $\tau, \tau_{1}$ 和 $\tau_{2}$ 都是 $\mathcal{F}(\cdot)$ 的停时，则
> 1. 对任意 $t \geqslant 0$，$\{ \tau < t \} \in \mathcal{F}(t)$，且 $\{ \tau = t \} \in \mathcal{F}(t)$
> 2. $\tau_{1} \lor \tau_{2} = \max\{ \tau_{1}, \tau_{2} \}$ 和 $\tau_{1} \wedge \tau_{2} = \min\{ \tau_{1}, \tau_{2} \}$ 都是停时

**证明.**
对于 (1)，首先可以可以使用上界趋于 $t$ 的一列闭区间的并表示开区间：
$$
\{ \tau < t \} = \bigcup_{k=1}^{\infty} \left\{  \tau \leqslant t - \frac{1}{k}  \right\}
$$
这样一来，根据停时的定义，右侧的每一项有 $\displaystyle \left\{  \tau \leqslant t - \frac{1}{k}  \right\} \in \mathcal{F}\left( t - \frac{1}{k} \right)$，同时 $\mathcal{F}(\cdot)$ 是滤子，有 $\displaystyle \mathcal{F}\left( t - \frac{1}{k} \right) \subset \mathcal{F}(t)$。最后 $\mathcal{F}(\cdot)$ 是 $\sigma$-代数，对元素的可数并封闭，因此有 $\{ \tau < t \} \in \mathcal{F}(t)$。由于 $\{ \tau = t \} = \{ \tau \leqslant t \} \cap \{ \tau < t \}^{c}$，由 $\sigma$-代数的定义，也有 $\{ \tau = t \} \in \mathcal{F}(t)$。

对于 (2) ，首先由于 $\tau_{1}$ 和 $\tau_{2}$，所以不论取 $\max$ 还是 $\min$，都将得到一个非负的映射，因此满足停时的前提条件。其次我们期望利用 $\sigma$ 代数的性质，将 $\{ \tau_{1} \,\square\, \tau_{2} \leqslant t\}$ 表示成 $\{ \tau \leqslant t \}$ 或是 $\{ \tau < t \}$ 的有限次集合运算结果，就能证明 $\{ \tau_{1} \,\square\, \tau_{2} \leqslant t\} \in \mathcal{F}(t)$，进而证明它们是停时。可以验证
$$
\begin{align}
\{ \tau_{1} \lor \tau_{2} \leqslant t \} &= \{ \tau_{1} \leqslant t \} \cap \{ \tau_{2} \leqslant t \} \in \mathcal{F}(t),\\
\{ \tau_{1} \wedge \tau_{2} \leqslant t \} &= \{ \tau_{1} \leqslant t \} \cup \{ \tau_{2} \leqslant t \} \in \mathcal{F}(t)
\end{align}
$$
其中 $\tau_{1} \lor \tau_{2} \leqslant t$ 意为 $\tau_{1}$ 和 $\tau_{2}$ 都不大于 $t$，而 $\tau_{1} \wedge \tau_{2} \leqslant t$ 意为 $\tau_{1}$ 和 $\tau_{2}$ 中至少一个不大于 $t$。因此 $\tau_{1} \lor \tau_{2}$ 和 $\tau_{1} \wedge \tau_{2}$ 都是停时。

接下来给出停时的一个经典例子和附带的一个定理。

> **定理 6.3（首达时）**
> 考虑满足解的存在唯一性定理条件的随机微分方程 $\displaystyle \left\{\begin{align} \mathrm{d}\boldsymbol{X}(t) &= \boldsymbol{b}(t, \boldsymbol{X})\mathrm{d}t + \boldsymbol{B}(t, \boldsymbol{X})\mathrm{d}\boldsymbol{W},\\\boldsymbol{X}(0) &= \boldsymbol{X}_{0} \end{align}\right.$ 的解 $\boldsymbol{X}(\cdot)$（假设其，考虑该过程 “首次到达”  $\mathbb{R}^{n}$ 中的非空闭集或空开集 $E$ 的时间：
> $$\tau = \inf \{ t \geqslant 0 : \boldsymbol{X}(t) \in E \},$$
> 则 $\tau$ 是一个停时（若 $\boldsymbol{X}(\cdot)$ 的某个轨道不碰触到 $E$，则规定该轨道对应于 $E$ 的首达时为 $+\infty$）。
> <font color="red">“停时” 这一名称就来源于此。</font>

<img src="Pasted image 20260128160218.png" style="zoom:50%"/>

**证明.**
要证明 $\tau$ 是一个停时，只需证明固定 $t$ 的条件下有 $\{  \tau \leqslant t \} \in \mathcal{F}(t)$。注意 $\tau$ 是用下确界定义的，如果 $\tau \leqslant t$，则一定存在某个 $t_{0} \in [0, t]$ 使得 $\boldsymbol{X}(t_{0}) \in E$。因此我们只要尝试 “枚举” 所有 $[0, t]$ 中的 $t_{0}$ 即可完整拼凑出 $\{ \tau \leqslant t \}$ 的全部情形。但是需要注意 $[0, \infty)$ 上的闭区间是不可数集，因此我们需要在上面找一个稠密的可数集 $\{ t_{i} \}_{i=1}^{\infty}$ 来完成这个操作。因此就有
$$
\{ \tau \leqslant t \} = \bigcup_{t_{i} \leqslant t} \{ \boldsymbol{X}(t_{i}) \in E \}
$$
请注意等号右侧是可数并，可以联想到 $\sigma$-代数的定义。如果 $\{ \boldsymbol{X}(t_{i}) \in E \}$ 是 $\mathcal{F}(t_{i})$ 中的元素，则 $\{ \tau \leqslant t \}$ 一定也是其中的元素。此时需要对 $E$ 进行讨论；同时注意，固定 $t_{i}$ 时，$\boldsymbol{X}(t_{i})$ 是一个随机变量，即 $\Omega$ 到 $\mathbb{R}^{n}$ 的可测函数。

如果 $E$ 是开集，则 $E \in \mathcal{B}(\mathbb{R}^{n})$，根据可测函数的性质，有 $\{ \boldsymbol{X}(t_{i}) \in E \} \in \mathcal{F}(t_{i}) \subset \mathcal{F}(t)$。反之，我们可以用一列递降收敛到 $E$ 开集 $U_{n}$ 来逼近之：考虑点 $x$ 到 $E$ 的距离 $d(x, E) = \inf \{ d(x,y): y \in E \}$，其中 $d$ 取 $\mathbb{R}^{n}$ 中的 Euclid 距离，则
$$
E = \bigcap_{i=1}^{\infty} U_{n} = \bigcap_{i=1}^{\infty} \left\{  x: d(x, E) < \frac{1}{n}  \right\}.
$$
我们将对应于 $U_{n}$ 的停时记为 $\tau_{U_{n}}$，由于 $U_{n}$ 是开集，$\tau_{U_{n}}$ 是停时，因此 $\{ \tau_{U_{n}} \leqslant t \} \in \mathcal{F}(t)$。最后我们需要证明的其实是**可数交是否能够穿脱到下极限里面**的问题：
$$
\bigcap_{n=1}^{\infty} \{ \tau_{U_{n}} \leqslant t \} \mathop{=}\limits^{?}\, \{ \tau_{\bigcap_{i=1}^{\infty} U_{n}} \leqslant t \} = \{ \tau_{C} \leqslant t \} 
$$
我们证明二者互相包含。右边包含于左边是显然的，现在证明左边包含于右边。取 $\omega \in \displaystyle \bigcap_{n=1}^{\infty} \{ \tau_{U_{n}} \leqslant t \}$，这意味着对任意 $n$，都有 $\{ \tau_{U_{n}} \leqslant t \}$，即存在 $s_{n} \leqslant t$，使得 $\boldsymbol{X}(s_{n}) \in U_{n}$。由于 $[0, t]$ 是紧集，存在一个收敛子列 $s_{n_{k}} \rightarrow s \in [0, t]$。此时我们希望 $\boldsymbol{X}$ 是连续的，这样就可以得到 $\boldsymbol{X}(s_{n_{k}}, \omega) \rightarrow \boldsymbol{X}(s, \omega)$。另外根据 $U_{n}$ 的定义，有 $\displaystyle d(\boldsymbol{X}(s_{n_{k}}, \omega), E) < \frac{1}{n_{k}}$，两边对 $k$ 去极限，得到 $d(\boldsymbol{X}(s, \omega), E) = 0$，即 $\boldsymbol{X}(s, \omega) \in E$。这样就证明了 $\displaystyle \bigcap_{n=1}^{\infty} \{ \tau_{U_{n}} \leqslant t \} = \{ \tau_{C} \leqslant t \}$。总而言之，有
$$
\{ \tau \leqslant t \} = \bigcap_{n=1}^{\infty} \underbrace{ \bigcup_{t_{i} \leqslant t} \{ \boldsymbol{X}(t_{i}) \in U_{n} \} }_{ \{ \tau_{U_{n}} \leqslant t \} \in \mathcal{F}(t_{i}) \subset \mathcal{F}(t) } \subset \mathcal{F}(t).
$$

> **注解 6.4**
> 和停时定义对应地，还有 $\boldsymbol{X}$ 最后碰触集合 $E$ 的时间 $\sigma = \sup \{ t \geqslant 0: \boldsymbol{X}(t) \in E \}$，但它**不是停时**，因为 $\{ \sigma \leqslant t \}$ 和未来相关，未来的“信息”并不在 $\mathcal{F}(t)$ 中。

### 6.1.2 停时与随机积分的关系



## 6.2 在偏微分方程和 Feynman–Kac 公式中的应用


## 6.3 最优停时


## 6.4 最优定价


## 6.5 Stratonovich 积分

